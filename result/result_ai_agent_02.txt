% uv run ai_agent_02_for_confirm_checkpoint.py

first_response: {'query': '私の好きなものはずんだ餅です。覚えておいてね。', 'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={}), AIMessage(content='承知しました。ずんだ餅がお好きなんですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--97da035c-c7a2-4f57-b0c2-ba5f745e5201-0', usage_metadata={'input_tokens': 27, 'output_tokens': 12, 'total_tokens': 39, 'input_token_details': {'cache_read': 0}})]}
---
CheckpointTuple(config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2ed1-673a-8002-424d9d2725b9'}}, checkpoint={'v': 4, 'ts': '2025-08-16T05:06:53.275308+00:00', 'id': '1f07a5ed-2ed1-673a-8002-424d9d2725b9', 'channel_versions': {'__start__': '00000000000000000000000000000002.0.1336813188815491', 'query': '00000000000000000000000000000002.0.1336813188815491', 'messages': '00000000000000000000000000000004.0.2923418482677801', 'branch:to:add_message': '00000000000000000000000000000003.0.5903727571573736', 'branch:to:llm_response': '00000000000000000000000000000004.0.2923418482677801'}, 'versions_seen': {'__input__': {}, '__start__': {'__start__': '00000000000000000000000000000001.0.4493330143203713'}, 'add_message': {'branch:to:add_message': '00000000000000000000000000000002.0.1336813188815491'}, 'llm_response': {'branch:to:llm_response': '00000000000000000000000000000003.0.5903727571573736'}}, 'updated_channels': ['messages'], 'channel_values': {'query': '私の好きなものはずんだ餅です。覚えておいてね。', 'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={}), AIMessage(content='承知しました。ずんだ餅がお好きなんですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--97da035c-c7a2-4f57-b0c2-ba5f745e5201-0', usage_metadata={'input_tokens': 27, 'output_tokens': 12, 'total_tokens': 39, 'input_token_details': {'cache_read': 0}})]}}, metadata={'source': 'loop', 'step': 2, 'parents': {}}, parent_config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2616-658c-8001-5710da0e2323'}}, pending_writes=[])
CheckpointTuple(config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2616-658c-8001-5710da0e2323'}}, checkpoint={'v': 4, 'ts': '2025-08-16T05:06:52.359819+00:00', 'id': '1f07a5ed-2616-658c-8001-5710da0e2323', 'channel_versions': {'__start__': '00000000000000000000000000000002.0.1336813188815491', 'query': '00000000000000000000000000000002.0.1336813188815491', 'messages': '00000000000000000000000000000003.0.5903727571573736', 'branch:to:add_message': '00000000000000000000000000000003.0.5903727571573736', 'branch:to:llm_response': '00000000000000000000000000000003.0.5903727571573736'}, 'versions_seen': {'__input__': {}, '__start__': {'__start__': '00000000000000000000000000000001.0.4493330143203713'}, 'add_message': {'branch:to:add_message': '00000000000000000000000000000002.0.1336813188815491'}}, 'updated_channels': ['branch:to:llm_response', 'messages'], 'channel_values': {'query': '私の好きなものはずんだ餅です。覚えておいてね。', 'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={})], 'branch:to:llm_response': None}}, metadata={'source': 'loop', 'step': 1, 'parents': {}}, parent_config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2614-6e1c-8000-e8b84dfaaf5f'}}, pending_writes=[('a4458518-8ce6-4b07-0c65-63e1f1a90248', 'messages', [AIMessage(content='承知しました。ずんだ餅がお好きなんですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--97da035c-c7a2-4f57-b0c2-ba5f745e5201-0', usage_metadata={'input_tokens': 27, 'output_tokens': 12, 'total_tokens': 39, 'input_token_details': {'cache_read': 0}})])])
CheckpointTuple(config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2614-6e1c-8000-e8b84dfaaf5f'}}, checkpoint={'v': 4, 'ts': '2025-08-16T05:06:52.359217+00:00', 'id': '1f07a5ed-2614-6e1c-8000-e8b84dfaaf5f', 'channel_versions': {'__start__': '00000000000000000000000000000002.0.1336813188815491', 'query': '00000000000000000000000000000002.0.1336813188815491', 'messages': '00000000000000000000000000000002.0.1336813188815491', 'branch:to:add_message': '00000000000000000000000000000002.0.1336813188815491'}, 'versions_seen': {'__input__': {}, '__start__': {'__start__': '00000000000000000000000000000001.0.4493330143203713'}}, 'updated_channels': ['branch:to:add_message', 'messages', 'query'], 'channel_values': {'query': '私の好きなものはずんだ餅です。覚えておいてね。', 'messages': [], 'branch:to:add_message': None}}, metadata={'source': 'loop', 'step': 0, 'parents': {}}, parent_config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2613-6d64-bfff-bb90aee3a512'}}, pending_writes=[('910d5015-2e6a-0642-4732-68e6c59a26c7', 'messages', [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={})]), ('910d5015-2e6a-0642-4732-68e6c59a26c7', 'branch:to:llm_response', None)])
CheckpointTuple(config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2613-6d64-bfff-bb90aee3a512'}}, checkpoint={'v': 4, 'ts': '2025-08-16T05:06:52.358791+00:00', 'id': '1f07a5ed-2613-6d64-bfff-bb90aee3a512', 'channel_versions': {'__start__': '00000000000000000000000000000001.0.4493330143203713'}, 'versions_seen': {'__input__': {}}, 'updated_channels': ['__start__'], 'channel_values': {'__start__': State(query='私の好きなものはずんだ餅です。覚えておいてね。', messages=[])}}, metadata={'source': 'input', 'step': -1, 'parents': {}}, parent_config=None, pending_writes=[('24257fce-95f7-3f6b-31ae-de9327417f54', 'query', '私の好きなものはずんだ餅です。覚えておいてね。'), ('24257fce-95f7-3f6b-31ae-de9327417f54', 'messages', []), ('24257fce-95f7-3f6b-31ae-de9327417f54', 'branch:to:add_message', None)])
---
チェックポイントデータ:
{'channel_values': {'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}),
                                 HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={}),
                                 AIMessage(content='承知しました。ずんだ餅がお好きなんですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--97da035c-c7a2-4f57-b0c2-ba5f745e5201-0', usage_metadata={'input_tokens': 27, 'output_tokens': 12, 'total_tokens': 39, 'input_token_details': {'cache_read': 0}})],
                    'query': '私の好きなものはずんだ餅です。覚えておいてね。'},
 'channel_versions': {'__start__': '00000000000000000000000000000002.0.1336813188815491',
                      'branch:to:add_message': '00000000000000000000000000000003.0.5903727571573736',
                      'branch:to:llm_response': '00000000000000000000000000000004.0.2923418482677801',
                      'messages': '00000000000000000000000000000004.0.2923418482677801',
                      'query': '00000000000000000000000000000002.0.1336813188815491'},
 'id': '1f07a5ed-2ed1-673a-8002-424d9d2725b9',
 'ts': '2025-08-16T05:06:53.275308+00:00',
 'updated_channels': ['messages'],
 'v': 4,
 'versions_seen': {'__input__': {},
                   '__start__': {'__start__': '00000000000000000000000000000001.0.4493330143203713'},
                   'add_message': {'branch:to:add_message': '00000000000000000000000000000002.0.1336813188815491'},
                   'llm_response': {'branch:to:llm_response': '00000000000000000000000000000003.0.5903727571573736'}}}

メタデータ:
{'parents': {}, 'source': 'loop', 'step': 2}
===

second_response: {'query': '私の好物は何か覚えてる？', 'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={}), AIMessage(content='承知しました。ずんだ餅がお好きなんですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--97da035c-c7a2-4f57-b0c2-ba5f745e5201-0', usage_metadata={'input_tokens': 27, 'output_tokens': 12, 'total_tokens': 39, 'input_token_details': {'cache_read': 0}}), HumanMessage(content='私の好物は何か覚えてる？', additional_kwargs={}, response_metadata={}), AIMessage(content='はい、ずんだ餅ですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--ef67ef92-5a31-4138-bf5c-7e7ea4547f55-0', usage_metadata={'input_tokens': 45, 'output_tokens': 8, 'total_tokens': 53, 'input_token_details': {'cache_read': 0}})]}
---
CheckpointTuple(config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-4062-6b2a-8006-ed8569146657'}}, checkpoint={'v': 4, 'ts': '2025-08-16T05:06:55.117379+00:00', 'id': '1f07a5ed-4062-6b2a-8006-ed8569146657', 'channel_versions': {'__start__': '00000000000000000000000000000006.0.1380599794570483', 'query': '00000000000000000000000000000006.0.1380599794570483', 'messages': '00000000000000000000000000000008.0.7399530724624241', 'branch:to:add_message': '00000000000000000000000000000007.0.19654931888004568', 'branch:to:llm_response': '00000000000000000000000000000008.0.7399530724624241'}, 'versions_seen': {'__input__': {}, '__start__': {'__start__': '00000000000000000000000000000005.0.6876332360749636'}, 'add_message': {'branch:to:add_message': '00000000000000000000000000000006.0.1380599794570483'}, 'llm_response': {'branch:to:llm_response': '00000000000000000000000000000007.0.19654931888004568'}}, 'updated_channels': ['messages'], 'channel_values': {'query': '私の好物は何か覚えてる？', 'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={}), AIMessage(content='承知しました。ずんだ餅がお好きなんですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--97da035c-c7a2-4f57-b0c2-ba5f745e5201-0', usage_metadata={'input_tokens': 27, 'output_tokens': 12, 'total_tokens': 39, 'input_token_details': {'cache_read': 0}}), HumanMessage(content='私の好物は何か覚えてる？', additional_kwargs={}, response_metadata={}), AIMessage(content='はい、ずんだ餅ですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--ef67ef92-5a31-4138-bf5c-7e7ea4547f55-0', usage_metadata={'input_tokens': 45, 'output_tokens': 8, 'total_tokens': 53, 'input_token_details': {'cache_read': 0}})]}}, metadata={'source': 'loop', 'step': 6, 'parents': {}}, parent_config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2edf-6452-8005-bbf8daafe0d9'}}, pending_writes=[])
CheckpointTuple(config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2edf-6452-8005-bbf8daafe0d9'}}, checkpoint={'v': 4, 'ts': '2025-08-16T05:06:53.280974+00:00', 'id': '1f07a5ed-2edf-6452-8005-bbf8daafe0d9', 'channel_versions': {'__start__': '00000000000000000000000000000006.0.1380599794570483', 'query': '00000000000000000000000000000006.0.1380599794570483', 'messages': '00000000000000000000000000000007.0.19654931888004568', 'branch:to:add_message': '00000000000000000000000000000007.0.19654931888004568', 'branch:to:llm_response': '00000000000000000000000000000007.0.19654931888004568'}, 'versions_seen': {'__input__': {}, '__start__': {'__start__': '00000000000000000000000000000005.0.6876332360749636'}, 'add_message': {'branch:to:add_message': '00000000000000000000000000000006.0.1380599794570483'}, 'llm_response': {'branch:to:llm_response': '00000000000000000000000000000003.0.5903727571573736'}}, 'updated_channels': ['branch:to:llm_response', 'messages'], 'channel_values': {'query': '私の好物は何か覚えてる？', 'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={}), AIMessage(content='承知しました。ずんだ餅がお好きなんですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--97da035c-c7a2-4f57-b0c2-ba5f745e5201-0', usage_metadata={'input_tokens': 27, 'output_tokens': 12, 'total_tokens': 39, 'input_token_details': {'cache_read': 0}}), HumanMessage(content='私の好物は何か覚えてる？', additional_kwargs={}, response_metadata={})], 'branch:to:llm_response': None}}, metadata={'source': 'loop', 'step': 5, 'parents': {}}, parent_config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2edc-6fe0-8004-3be4eae98ff1'}}, pending_writes=[('a44a45e8-2a2a-381c-1ba4-ddcfc6b8c1d3', 'messages', [AIMessage(content='はい、ずんだ餅ですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--ef67ef92-5a31-4138-bf5c-7e7ea4547f55-0', usage_metadata={'input_tokens': 45, 'output_tokens': 8, 'total_tokens': 53, 'input_token_details': {'cache_read': 0}})])])
CheckpointTuple(config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2edc-6fe0-8004-3be4eae98ff1'}}, checkpoint={'v': 4, 'ts': '2025-08-16T05:06:53.280041+00:00', 'id': '1f07a5ed-2edc-6fe0-8004-3be4eae98ff1', 'channel_versions': {'__start__': '00000000000000000000000000000006.0.1380599794570483', 'query': '00000000000000000000000000000006.0.1380599794570483', 'messages': '00000000000000000000000000000006.0.1380599794570483', 'branch:to:add_message': '00000000000000000000000000000006.0.1380599794570483', 'branch:to:llm_response': '00000000000000000000000000000004.0.2923418482677801'}, 'versions_seen': {'__input__': {}, '__start__': {'__start__': '00000000000000000000000000000005.0.6876332360749636'}, 'add_message': {'branch:to:add_message': '00000000000000000000000000000002.0.1336813188815491'}, 'llm_response': {'branch:to:llm_response': '00000000000000000000000000000003.0.5903727571573736'}}, 'updated_channels': ['branch:to:add_message', 'messages', 'query'], 'channel_values': {'query': '私の好物は何か覚えてる？', 'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={}), AIMessage(content='承知しました。ずんだ餅がお好きなんですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--97da035c-c7a2-4f57-b0c2-ba5f745e5201-0', usage_metadata={'input_tokens': 27, 'output_tokens': 12, 'total_tokens': 39, 'input_token_details': {'cache_read': 0}})], 'branch:to:add_message': None}}, metadata={'source': 'loop', 'step': 4, 'parents': {}}, parent_config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2edb-6abe-8003-5a18d8b74c94'}}, pending_writes=[('06d7ac0c-582b-a724-be8b-50959a4c1486', 'messages', [HumanMessage(content='私の好物は何か覚えてる？', additional_kwargs={}, response_metadata={})]), ('06d7ac0c-582b-a724-be8b-50959a4c1486', 'branch:to:llm_response', None)])
CheckpointTuple(config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2edb-6abe-8003-5a18d8b74c94'}}, checkpoint={'v': 4, 'ts': '2025-08-16T05:06:53.279497+00:00', 'id': '1f07a5ed-2edb-6abe-8003-5a18d8b74c94', 'channel_versions': {'__start__': '00000000000000000000000000000005.0.6876332360749636', 'query': '00000000000000000000000000000002.0.1336813188815491', 'messages': '00000000000000000000000000000004.0.2923418482677801', 'branch:to:add_message': '00000000000000000000000000000003.0.5903727571573736', 'branch:to:llm_response': '00000000000000000000000000000004.0.2923418482677801'}, 'versions_seen': {'__input__': {}, '__start__': {'__start__': '00000000000000000000000000000001.0.4493330143203713'}, 'add_message': {'branch:to:add_message': '00000000000000000000000000000002.0.1336813188815491'}, 'llm_response': {'branch:to:llm_response': '00000000000000000000000000000003.0.5903727571573736'}}, 'updated_channels': ['__start__'], 'channel_values': {'__start__': State(query='私の好物は何か覚えてる？', messages=[]), 'query': '私の好きなものはずんだ餅です。覚えておいてね。', 'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={}), AIMessage(content='承知しました。ずんだ餅がお好きなんですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--97da035c-c7a2-4f57-b0c2-ba5f745e5201-0', usage_metadata={'input_tokens': 27, 'output_tokens': 12, 'total_tokens': 39, 'input_token_details': {'cache_read': 0}})]}}, metadata={'source': 'input', 'step': 3, 'parents': {}}, parent_config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2ed1-673a-8002-424d9d2725b9'}}, pending_writes=[('9c664e7a-06ef-0f5f-fe5e-40436db50605', 'query', '私の好物は何か覚えてる？'), ('9c664e7a-06ef-0f5f-fe5e-40436db50605', 'messages', []), ('9c664e7a-06ef-0f5f-fe5e-40436db50605', 'branch:to:add_message', None)])
CheckpointTuple(config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2ed1-673a-8002-424d9d2725b9'}}, checkpoint={'v': 4, 'ts': '2025-08-16T05:06:53.275308+00:00', 'id': '1f07a5ed-2ed1-673a-8002-424d9d2725b9', 'channel_versions': {'__start__': '00000000000000000000000000000002.0.1336813188815491', 'query': '00000000000000000000000000000002.0.1336813188815491', 'messages': '00000000000000000000000000000004.0.2923418482677801', 'branch:to:add_message': '00000000000000000000000000000003.0.5903727571573736', 'branch:to:llm_response': '00000000000000000000000000000004.0.2923418482677801'}, 'versions_seen': {'__input__': {}, '__start__': {'__start__': '00000000000000000000000000000001.0.4493330143203713'}, 'add_message': {'branch:to:add_message': '00000000000000000000000000000002.0.1336813188815491'}, 'llm_response': {'branch:to:llm_response': '00000000000000000000000000000003.0.5903727571573736'}}, 'updated_channels': ['messages'], 'channel_values': {'query': '私の好きなものはずんだ餅です。覚えておいてね。', 'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={}), AIMessage(content='承知しました。ずんだ餅がお好きなんですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--97da035c-c7a2-4f57-b0c2-ba5f745e5201-0', usage_metadata={'input_tokens': 27, 'output_tokens': 12, 'total_tokens': 39, 'input_token_details': {'cache_read': 0}})]}}, metadata={'source': 'loop', 'step': 2, 'parents': {}}, parent_config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2616-658c-8001-5710da0e2323'}}, pending_writes=[])
CheckpointTuple(config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2616-658c-8001-5710da0e2323'}}, checkpoint={'v': 4, 'ts': '2025-08-16T05:06:52.359819+00:00', 'id': '1f07a5ed-2616-658c-8001-5710da0e2323', 'channel_versions': {'__start__': '00000000000000000000000000000002.0.1336813188815491', 'query': '00000000000000000000000000000002.0.1336813188815491', 'messages': '00000000000000000000000000000003.0.5903727571573736', 'branch:to:add_message': '00000000000000000000000000000003.0.5903727571573736', 'branch:to:llm_response': '00000000000000000000000000000003.0.5903727571573736'}, 'versions_seen': {'__input__': {}, '__start__': {'__start__': '00000000000000000000000000000001.0.4493330143203713'}, 'add_message': {'branch:to:add_message': '00000000000000000000000000000002.0.1336813188815491'}}, 'updated_channels': ['branch:to:llm_response', 'messages'], 'channel_values': {'query': '私の好きなものはずんだ餅です。覚えておいてね。', 'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={})], 'branch:to:llm_response': None}}, metadata={'source': 'loop', 'step': 1, 'parents': {}}, parent_config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2614-6e1c-8000-e8b84dfaaf5f'}}, pending_writes=[('a4458518-8ce6-4b07-0c65-63e1f1a90248', 'messages', [AIMessage(content='承知しました。ずんだ餅がお好きなんですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--97da035c-c7a2-4f57-b0c2-ba5f745e5201-0', usage_metadata={'input_tokens': 27, 'output_tokens': 12, 'total_tokens': 39, 'input_token_details': {'cache_read': 0}})])])
CheckpointTuple(config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2614-6e1c-8000-e8b84dfaaf5f'}}, checkpoint={'v': 4, 'ts': '2025-08-16T05:06:52.359217+00:00', 'id': '1f07a5ed-2614-6e1c-8000-e8b84dfaaf5f', 'channel_versions': {'__start__': '00000000000000000000000000000002.0.1336813188815491', 'query': '00000000000000000000000000000002.0.1336813188815491', 'messages': '00000000000000000000000000000002.0.1336813188815491', 'branch:to:add_message': '00000000000000000000000000000002.0.1336813188815491'}, 'versions_seen': {'__input__': {}, '__start__': {'__start__': '00000000000000000000000000000001.0.4493330143203713'}}, 'updated_channels': ['branch:to:add_message', 'messages', 'query'], 'channel_values': {'query': '私の好きなものはずんだ餅です。覚えておいてね。', 'messages': [], 'branch:to:add_message': None}}, metadata={'source': 'loop', 'step': 0, 'parents': {}}, parent_config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2613-6d64-bfff-bb90aee3a512'}}, pending_writes=[('910d5015-2e6a-0642-4732-68e6c59a26c7', 'messages', [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={})]), ('910d5015-2e6a-0642-4732-68e6c59a26c7', 'branch:to:llm_response', None)])
CheckpointTuple(config={'configurable': {'thread_id': 'example-1', 'checkpoint_ns': '', 'checkpoint_id': '1f07a5ed-2613-6d64-bfff-bb90aee3a512'}}, checkpoint={'v': 4, 'ts': '2025-08-16T05:06:52.358791+00:00', 'id': '1f07a5ed-2613-6d64-bfff-bb90aee3a512', 'channel_versions': {'__start__': '00000000000000000000000000000001.0.4493330143203713'}, 'versions_seen': {'__input__': {}}, 'updated_channels': ['__start__'], 'channel_values': {'__start__': State(query='私の好きなものはずんだ餅です。覚えておいてね。', messages=[])}}, metadata={'source': 'input', 'step': -1, 'parents': {}}, parent_config=None, pending_writes=[('24257fce-95f7-3f6b-31ae-de9327417f54', 'query', '私の好きなものはずんだ餅です。覚えておいてね。'), ('24257fce-95f7-3f6b-31ae-de9327417f54', 'messages', []), ('24257fce-95f7-3f6b-31ae-de9327417f54', 'branch:to:add_message', None)])
---
チェックポイントデータ:
{'channel_values': {'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}),
                                 HumanMessage(content='私の好きなものはずんだ餅です。覚えておいてね。', additional_kwargs={}, response_metadata={}),
                                 AIMessage(content='承知しました。ずんだ餅がお好きなんですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--97da035c-c7a2-4f57-b0c2-ba5f745e5201-0', usage_metadata={'input_tokens': 27, 'output_tokens': 12, 'total_tokens': 39, 'input_token_details': {'cache_read': 0}}),
                                 HumanMessage(content='私の好物は何か覚えてる？', additional_kwargs={}, response_metadata={}),
                                 AIMessage(content='はい、ずんだ餅ですね。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--ef67ef92-5a31-4138-bf5c-7e7ea4547f55-0', usage_metadata={'input_tokens': 45, 'output_tokens': 8, 'total_tokens': 53, 'input_token_details': {'cache_read': 0}})],
                    'query': '私の好物は何か覚えてる？'},
 'channel_versions': {'__start__': '00000000000000000000000000000006.0.1380599794570483',
                      'branch:to:add_message': '00000000000000000000000000000007.0.19654931888004568',
                      'branch:to:llm_response': '00000000000000000000000000000008.0.7399530724624241',
                      'messages': '00000000000000000000000000000008.0.7399530724624241',
                      'query': '00000000000000000000000000000006.0.1380599794570483'},
 'id': '1f07a5ed-4062-6b2a-8006-ed8569146657',
 'ts': '2025-08-16T05:06:55.117379+00:00',
 'updated_channels': ['messages'],
 'v': 4,
 'versions_seen': {'__input__': {},
                   '__start__': {'__start__': '00000000000000000000000000000005.0.6876332360749636'},
                   'add_message': {'branch:to:add_message': '00000000000000000000000000000006.0.1380599794570483'},
                   'llm_response': {'branch:to:llm_response': '00000000000000000000000000000007.0.19654931888004568'}}}

メタデータ:
{'parents': {}, 'source': 'loop', 'step': 6}
===

other_thread_response: {'query': '私の好物は何？', 'messages': [SystemMessage(content='あなたは最小限の応答をする対話エージェントです。', additional_kwargs={}, response_metadata={}), HumanMessage(content='私の好物は何？', additional_kwargs={}, response_metadata={}), AIMessage(content='私はあなたの好物を知りません。', additional_kwargs={}, response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'safety_ratings': []}, id='run--10f84daa-051d-4ecb-a747-40e3783e471a-0', usage_metadata={'input_tokens': 19, 'output_tokens': 8, 'total_tokens': 27, 'input_token_details': {'cache_read': 0}})]}
